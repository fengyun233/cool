"use strict";$(function(){nie.config.copyRight.setWhite()}),nie.define("main",function(){var e=nie.require("common"),a=$(".tab-wrap .tab-btn"),i=$(".people-wrap"),t=$("#page-wrap"),n=$(".sections"),s=$(".side-nav"),o=s.find(".nav-btn"),c=$(".section"),l=c.length,r=0,d=$(".arrow-wrap"),p=null,h=null,u=!0,w=document.getElementById("audio"),g=["https://n.v.netease.com/2018/0615/3148675eaa3a54e1ad379060f3e04d85.mp3"],v=0,m=document.getElementById("bg1video"),f=document.getElementById("bg2video"),y=document.getElementById("bg3video"),b=(document.getElementById("bg4video"),$(".people")),I=$(".people-name"),E=$(".introduce"),P={peopleMoveTo:function(e,a){0===e?$(b[e]).animate({left:a},800):$(b[e]).animate({right:a},600)},animInEle:function(e,a){$(I[e]).fadeIn(1200),$(E[e]).fadeIn(1200),0===e?$(b[e]).animate({left:a},800):$(b[e]).animate({right:a},600)},animOutEle:function(e,a){$(I[e]).fadeOut("fast"),$(E[e]).fadeOut("fast"),0===e?$(b[e]).css("left",a):$(b[e]).css("right",a)},animEle:function(e){var a=this;switch(e){case 0:a.animInEle(0,68),a.animOutEle(1,-755),a.animOutEle(2,-716);break;case 1:a.animInEle(1,0),a.animOutEle(0,-978),a.animOutEle(2,-716);break;case 2:a.animInEle(2,0),a.animOutEle(0,-978),a.animOutEle(1,-755)}},popShow:function(e){$(e).show(),$(".mask").show(),window.scrollHanlder.disableScroll()},popHide:function(e){$(e).hide(),$(".mask").hide(),window.scrollHanlder.enableScroll()},gotoPage:function(e){var a=this;switch(a.setPageHash(e),a.activeNavBtn(e),a.ctrlVideoPlay(e),e){case 0:n.css("top",0),t.height(1e3),a.clcInterval(),a.animEle(0);break;case 1:n.css("top",-1e3),t.height(1e3),a.clcInterval(),a.animEle(1);break;case 2:n.css("top",-2e3),t.height(1100),a.clcInterval(),d.hide(),a.animEle(2),a.addMusicInterval()}r=e},closeMusic:function(e){var i=this;2!==e&&w.played&&(w.pause(),$(".audio-play-wrap .player").removeClass("active"),$(".audio-play-wrap .player").removeClass("paused"),$(".audio-play-wrap .player").removeClass("played"),a.removeClass("active"),$(".tab-wrap .tab-btn1").addClass("active"),$(".people-wrap.yl").hide(),$(".people-wrap.jpd").hide(),$(".people-wrap.ljy").show(),i.clcMusicInterval())},getPageHeight:function(e){var a=0;switch(e){case 0:a=1e3;break;case 1:case 2:a=1e3;break;case 3:a=1100}return a},slideDown:function(e){var a=this,i=a.getPageHeight(e);t.height(a.getPageHeight(e+1)),$(document).scrollTop(2),n.animate({top:"-="+i},300)},slideUp:function(e){var a=this,i=a.getPageHeight(e);$(document).scrollTop(2),n.animate({top:"+="+i},300)},offsetGlobalEle:function(e,a,i){$(".logo").css("top",e),$(".side-nav").css("top",a),$(".standard-conf").css("top",i)},pageScroll:function(){var e=this,a=1055,i=1100;if($(window))var n=!0;$(document).scroll(function(){n&&(n=!1,setTimeout(function(){$(document).scrollTop()<=0?0!==r&&(t.height(1e3),e.slideUp(r-1),r-=1):$(document).scrollTop()>=$(document).height()-$(window).height()&&2!==r&&(t.height(1e3),e.slideDown(r),r+=1),0===r&&t.height(a),2===r?(t.height(i),h||e.addMusicInterval()):e.clcInterval(),e.animEle(r),e.closeMusic(r),r===l-1?d.hide():"none"===d.css("display")&&d.show(),e.activeNavBtn(r),e.setPageHash(r),e.ctrlVideoPlay(r),n=!0},300))})},activeNavBtn:function(e){o.removeClass("active"),o.eq(e).addClass("active")},setPageHash:function(e){switch(e){case 0:window.location.hash="#world";break;case 1:window.location.hash="#action";break;case 2:window.location.hash="#music";break;case 3:window.location.hash="#culture"}},activeMusicBtn:function(e){a.removeClass("active"),a.eq(e).addClass("active")},activeMusicPeople:function(e){switch(i.hide(),i.eq(e).show(),w.played&&(w.pause(),$(".audio-play-wrap .player").eq(e).removeClass("active")),e){case 0:$(w).attr("src","https://n.v.netease.com/2018/0627/17178a2d0c102a490fe10cc28bbfafe2.mp3");break;case 1:$(w).attr("src","https://n.v.netease.com/2018/0809/4104c50a467ce878fc5dad10f9cad2e9.mp3");break;case 2:$(w).attr("src","https://n.v.netease.com/2018/0809/9601ebb3a4b37c9ed3e9bea01ceadbde.mp3")}},addMusicInterval:function(){var e=this,a=1;h=setInterval(function(){e.activeMusicBtn(a),e.activeMusicPeople(a),a++,3===a&&(a=0)},3e3)},clcMusicInterval:function(){clearInterval(h),h=null},addInterval:function(e){p||(p=window.setInterval(function(){u?e.showMuseumTwo():e.showMuseumOne(),u=!u},3e3))},clcInterval:function(){p&&(window.clearInterval(p),p=null)},showMuseumOne:function(){$(".page4-wrap .content").removeClass("landspace"),$(".tab-wrap").removeClass("tab2"),$(".page4-wrap .page2").hide(),$(".page4-wrap .page1").show()},showMuseumTwo:function(){$(".page4-wrap .content").addClass("landspace"),$(".tab-wrap").addClass("tab2"),$(".page4-wrap .page1").hide(),$(".page4-wrap .page2").show()},winResize:function(){var e=this;$(window).resize(function(){"none"!==$(".video-box").css("display")&&e.gotoPage(1),e.initPagePos()})},initPagePos:function(){$(window).width()>1400&&$(window).width()<1920?($(".page2-wrap").css("margin-left",$(window).width()-1400),$(".page3-wrap").css("margin-left",$(window).width()-1400),$(".page4-wrap").css("margin-left",$(window).width()-1400),$("#NIE-copyRight").css({width:$(window).width(),right:0,"margin-right":0})):$(window).width()<=1400?($(".page2-wrap").css("margin-left",0),$(".page3-wrap").css("margin-left",0),$(".page4-wrap").css("margin-left",0),$("#NIE-copyRight").css({width:1400,right:0,"margin-right":0})):$(window).width()>=1920&&($("#NIE-copyRight").css({width:1920,right:"50%","margin-right":"-50%"}),$(".page2-wrap").css("margin-left",520),$(".page3-wrap").css("margin-left",520),$(".page4-wrap").css("margin-left",520)),$(window).height()<$(document).height()&&d.css("top",$(window).height()-80)},initScrollEvent:function(){var e=this;if($(window).height()<1100)e.pageScroll();else{var a=0;t.on("mousewheel",function(e){return e.stopPropagation(),!1}),t.mousewheel(function(i){var n=(new Date).getTime();1e3>n-a||(a=n,i.deltaY>0?0!==r&&(t.height(1e3),e.slideUp(r-1),r-=1):2!==r&&(t.height(1e3),e.slideDown(r),r+=1),0===r&&t.height(1e3),r===l-1?t.height(1100):e.clcInterval(),r===l-1?d.hide():"none"===d.css("display")&&d.show(),e.activeNavBtn(r),e.ctrlVideoPlay(r),e.animEle(r),e.setPageHash(r))})}},ctrlVideoPlay:function(e){switch(m.pause(),f.pause(),y.pause(),e){case 0:m.play();break;case 1:f.play();break;case 2:y.play()}},initGoPage:function(){var e=this,a=window.location.hash;if(a)switch(a){case"#world":r=0;break;case"#action":r=1;break;case"#music":r=2}e.gotoPage(r);setTimeout(function(){n.show()},50)},bindEvent:function(){var e=this;o.on("click",function(){var a=$(this).index();3===a?d.hide():("none"===d.css("display")&&d.show(),3===r&&$(document).scrollTop()===$(document).height()-$(window).height()&&$(document).scrollTop(2)),e.gotoPage(a),e.closeMusic(a)}),$(".share-g-wrap").on("mouseover",function(){$(".share-g-wrap").addClass("active"),$("#share").show()}),$(".share-g-wrap").on("mouseout",function(){$(".share-g-wrap").removeClass("active"),$("#share").hide()}),d.on("click",function(){r===l-2&&d.hide(),e.slideDown(r),r++,e.gotoPage(r),e.closeMusic(r)}),$(".video-play-wrap").on("click",function(){console.log(r),e.popShow(".video-box"),video.play()}),$(".close").on("click",function(){e.popHide(".video-box"),video.pause()}),$(".audio-play-wrap .pre").on("click",function(){0===v?(v=g.length-1,w.src=g[v],w.play()):(v-=1,w.src=g[v],w.play()),$(".audio-play-wrap .player").addClass("active")}),$(".audio-play-wrap .next").on("click",function(){v===g.length-1?(v=0,w.src=g[v],w.play()):(v+=1,w.src=g[v],w.play()),$(".audio-play-wrap .player").addClass("active")}),$(".audio-play-wrap .player").on("click",function(){w.paused?(w.play(),$(this).addClass("active")):w.played&&(w.pause(),$(this).removeClass("active")),$(this).removeClass("paused"),$(this).removeClass("played"),h&&e.clcMusicInterval()}),$(".audio-play-wrap .player").on("mouseover",function(){w.paused?$(this).addClass("paused"):w.played&&$(this).addClass("played")}),$(".audio-play-wrap .player").on("mouseout",function(){$(this).removeClass("paused"),$(this).removeClass("played")});var a=null;$(".tab-wrap .tab-btn").on("click",function(){var i=$(this).index();i!==a&&(e.activeMusicBtn(i),e.activeMusicPeople(i),h&&e.clcMusicInterval(),a=i)}),$(".tab-wrap .btn1").on("click",function(){e.showMuseumOne(),e.clcInterval()}),$(".tab-wrap .btn2").on("click",function(){e.showMuseumTwo(),e.clcInterval()})},init:function(){e.init(),this.initGoPage(),this.initPagePos(),this.initScrollEvent(),$("#share").hide(),this.bindEvent(),this.winResize()}};P.init()});